
R version 3.5.3 (2019-03-11) -- "Great Truth"
Copyright (C) 2019 The R Foundation for Statistical Computing
Platform: x86_64-w64-mingw32/x64 (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> library("glmertree")
Loading required package: lme4
Loading required package: Matrix
Loading required package: partykit
Loading required package: grid
Loading required package: libcoin
Loading required package: mvtnorm
> 
> ## load artificial example data
> data("DepressionDemo", package = "glmertree")
> 
> ## fit normal linear regression LMM tree for continuous outcome
> lt <- lmertree(depression ~ treatment | cluster | age + anxiety + duration,
+                data = DepressionDemo)
> #print(lt)
> #plot(lt, which = "all") # default behavior, may also be "tree" or "ranef" 
> coef(lt)
  (Intercept) treatmentTreatment 2
3    7.500141            4.1220824
4    8.591409            0.5212592
5   11.087612           -4.5468855
> #ranef(lt)
> #predict(lt, type = "response") # default behavior, may also be "node"
> predict(lt, re.form = NA) # excludes random effects, see ?lme4::predict.merMod
        1         2         3         4         5         6         7         8 
11.087612 11.622223  7.500141  9.112668 11.622223  8.591409 11.622223  9.112668 
        9        10        11        12        13        14        15        16 
 6.540726  7.500141 11.622223 11.087612  9.112668  9.112668 11.087612  6.540726 
       17        18        19        20        21        22        23        24 
11.087612  8.591409  7.500141  6.540726  9.112668  6.540726  6.540726 11.622223 
       25        26        27        28        29        30        31        32 
 9.112668 11.622223 11.622223 11.622223  7.500141  8.591409 11.622223  9.112668 
       33        34        35        36        37        38        39        40 
 9.112668 11.622223 11.087612  7.500141  6.540726  7.500141  8.591409 11.087612 
       41        42        43        44        45        46        47        48 
 8.591409  7.500141  7.500141  7.500141  7.500141  8.591409  8.591409  8.591409 
       49        50        51        52        53        54        55        56 
 7.500141  6.540726  7.500141  8.591409 11.622223  8.591409 11.622223 11.087612 
       57        58        59        60        61        62        63        64 
 8.591409  9.112668 11.622223  7.500141  6.540726  8.591409 11.087612 11.087612 
       65        66        67        68        69        70        71        72 
 9.112668 11.087612  9.112668  9.112668 11.622223  8.591409 11.622223  9.112668 
       73        74        75        76        77        78        79        80 
 6.540726 11.087612  8.591409 11.087612 11.087612 11.622223  7.500141  7.500141 
       81        82        83        84        85        86        87        88 
 8.591409  6.540726  8.591409  6.540726  8.591409 11.087612  9.112668 11.622223 
       89        90        91        92        93        94        95        96 
 6.540726  7.500141  8.591409  6.540726  7.500141  6.540726  8.591409  8.591409 
       97        98        99       100       101       102       103       104 
 9.112668  7.500141 11.087612 11.622223  9.112668  7.500141  8.591409  9.112668 
      105       106       107       108       109       110       111       112 
 7.500141  9.112668  6.540726 11.622223  8.591409  8.591409 11.622223 11.087612 
      113       114       115       116       117       118       119       120 
 7.500141  6.540726 11.622223  8.591409  9.112668  9.112668 11.622223  7.500141 
      121       122       123       124       125       126       127       128 
 6.540726 11.087612  7.500141  7.500141  7.500141  6.540726 11.087612  7.500141 
      129       130       131       132       133       134       135       136 
11.087612 11.622223  9.112668  9.112668 11.622223  6.540726  9.112668 11.622223 
      137       138       139       140       141       142       143       144 
 9.112668  6.540726  9.112668  8.591409 11.087612  8.591409  7.500141  8.591409 
      145       146       147       148       149       150 
11.622223  8.591409 11.087612 11.087612 11.087612  9.112668 
> #residuals(lt)
> VarCorr(lt) # see lme4::VarCorr
 Groups   Name        Std.Dev.
 cluster  (Intercept) 0.55878 
 Residual             1.90706 
> 
> 
> ## fit logistic regression GLMM tree for binary outcome
> gt <- glmertree(depression_bin ~ treatment | cluster | age + anxiety + duration,
+                 data = DepressionDemo)
> #print(gt)
> #plot(gt, which = "all") # default behavior, may also be "tree" or "ranef" 
> coef(gt)
  (Intercept) treatmentTreatment 2
3   -2.040582            3.0486168
4    0.895102           -0.4461277
5    1.920255           -4.8920761
> #ranef(gt)
> #predict(gt, type = "response") # default behavior, may also be "node" or "link"
> predict(gt, re.form = NA) # excludes random effects, see ?lme4::predict.merMod
         1          2          3          4          5          6          7 
0.87216689 0.73263547 0.11500753 0.61039532 0.73263547 0.70994192 0.73263547 
         8          9         10         11         12         13         14 
0.73263547 0.04871527 0.11500753 0.73263547 0.87216689 0.73263547 0.73263547 
        15         16         17         18         19         20         21 
0.87216689 0.04871527 0.87216689 0.70994192 0.11500753 0.04871527 0.61039532 
        22         23         24         25         26         27         28 
0.04871527 0.04871527 0.73263547 0.73263547 0.73263547 0.73263547 0.73263547 
        29         30         31         32         33         34         35 
0.11500753 0.70994192 0.73263547 0.61039532 0.73263547 0.73263547 0.87216689 
        36         37         38         39         40         41         42 
0.11500753 0.04871527 0.11500753 0.70994192 0.87216689 0.70994192 0.11500753 
        43         44         45         46         47         48         49 
0.11500753 0.11500753 0.11500753 0.70994192 0.70994192 0.11500753 0.11500753 
        50         51         52         53         54         55         56 
0.04871527 0.11500753 0.11500753 0.73263547 0.11500753 0.73263547 0.87216689 
        57         58         59         60         61         62         63 
0.11500753 0.73263547 0.73263547 0.11500753 0.04871527 0.11500753 0.87216689 
        64         65         66         67         68         69         70 
0.87216689 0.73263547 0.87216689 0.61039532 0.61039532 0.73263547 0.70994192 
        71         72         73         74         75         76         77 
0.73263547 0.61039532 0.04871527 0.87216689 0.70994192 0.87216689 0.87216689 
        78         79         80         81         82         83         84 
0.73263547 0.11500753 0.11500753 0.11500753 0.04871527 0.11500753 0.04871527 
        85         86         87         88         89         90         91 
0.70994192 0.87216689 0.73263547 0.73263547 0.04871527 0.11500753 0.11500753 
        92         93         94         95         96         97         98 
0.04871527 0.11500753 0.04871527 0.70994192 0.11500753 0.61039532 0.11500753 
        99        100        101        102        103        104        105 
0.87216689 0.73263547 0.73263547 0.11500753 0.11500753 0.61039532 0.11500753 
       106        107        108        109        110        111        112 
0.61039532 0.04871527 0.73263547 0.70994192 0.11500753 0.73263547 0.87216689 
       113        114        115        116        117        118        119 
0.11500753 0.04871527 0.73263547 0.11500753 0.61039532 0.61039532 0.73263547 
       120        121        122        123        124        125        126 
0.11500753 0.04871527 0.87216689 0.11500753 0.11500753 0.11500753 0.04871527 
       127        128        129        130        131        132        133 
0.87216689 0.11500753 0.87216689 0.73263547 0.73263547 0.73263547 0.73263547 
       134        135        136        137        138        139        140 
0.04871527 0.61039532 0.73263547 0.73263547 0.04871527 0.61039532 0.11500753 
       141        142        143        144        145        146        147 
0.87216689 0.11500753 0.11500753 0.70994192 0.73263547 0.70994192 0.87216689 
       148        149        150 
0.87216689 0.87216689 0.73263547 
> #residuals(gt)
> VarCorr(gt) # see lme4::VarCorr
 Groups  Name        Std.Dev.
 cluster (Intercept) 0.38847 
> 
> proc.time()
   user  system elapsed 
   3.54    0.60    4.11 
